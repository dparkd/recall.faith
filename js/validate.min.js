!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Picker=e()}(this,function(){"use strict";function w(t,e){return(e||document).querySelector(t)}function a(t,e,i){t.addEventListener(e,i,!1)}function l(c,u){var h=!1;function d(t,e,i){return Math.max(e,Math.min(t,i))}function i(t,e,i){if(i&&(h=!0),h){t.preventDefault();var o=c.getBoundingClientRect(),r=o.width,n=o.height,s=e.clientX,p=e.clientY,a=d(s-o.left,0,r),l=d(p-o.top,0,n);u(a/r,l/n)}}function e(t,e){1===(void 0===t.buttons?t.which:t.buttons)?i(t,t,e):h=!1}function o(t,e){1===t.touches.length?i(t,t.touches[0],e):h=!1}a(c,"mousedown",function(t){e(t,!0)}),a(c,"touchstart",function(t){o(t,!0)}),a(window,"mousemove",e),a(c,"touchmove",o),a(window,"mouseup",function(t){h=!1}),a(c,"touchend",function(t){h=!1}),a(c,"touchcancel",function(t){h=!1})}String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var i=this;i.length<t;)i=e+i;return i};var r=function(){function h(t,e,i,o){var u=this;if(void 0===t);else if(Array.isArray(t))this.rgba(t);else if(void 0===i){var r=t&&(""+t).trim();r&&function(t){var e;function i(t){return t.match(/([\-\d\.e]+)/g).map(Number)}if(t.startsWith("hsl")){var o=i(t),r=o[0],n=o[1],s=o[2];e=void 0===o[3]?1:o[3],r/=360,n/=100,s/=100,u.hsla([r,n,s,e])}else if(t.startsWith("rgb")){var p=i(t),a=p[0],l=p[1],c=p[2];e=void 0===p[3]?1:p[3],u.rgba([a,l,c,e])}else u.rgba(h.hexToRgb(t))}(r.toLowerCase())}else this.rgba([t,e,i,void 0===o?1:o])}var t=h.prototype;return t.rgba=function(t){if(!t){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=h.hslToRgb(this._hsla)}3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null},t.rgbString=function(){return"rgb("+this.rgba().slice(0,3)+")"},t.rgbaString=function(){return"rgba("+this.rgba()+")"},t.hsla=function(t){if(!t){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=h.rgbToHsl(this._rgba)}3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null},t.hslString=function(){var t=this.hsla();return"hsl("+360*t[0]+","+100*t[1]+"%,"+100*t[2]+"%)"},t.hslaString=function(){var t=this.hsla();return"hsla("+360*t[0]+","+100*t[1]+"%,"+100*t[2]+"%,"+t[3]+")"},t.hex=function(t){if(!t)return"#"+this.rgba().map(function(t,e){return e<3?t.toString(16):Math.round(255*t).toString(16)}).map(function(t){return t.padStart(2,"0")}).join("");this.rgba(h.hexToRgb(t))},h.hexToRgb=function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color: "+t);var i=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(t){return parseInt(t,16)});return i[3]=i[3]/255,i},h.rgbToHsl=function(t){var e=t[0],i=t[1],o=t[2],r=t[3];e/=255,i/=255,o/=255;var n,s,p=Math.max(e,i,o),a=Math.min(e,i,o),l=(p+a)/2;if(p===a)n=s=0;else{var c=p-a;switch(s=.5<l?c/(2-p-a):c/(p+a),p){case e:n=(i-o)/c+(i<o?6:0);break;case i:n=(o-e)/c+2;break;case o:n=(e-i)/c+4}n/=6}return[n,s,l,r]},h.hslToRgb=function(t){var e,i,o,r=t[0],n=t[1],s=t[2],p=t[3];function a(t,e,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(0===n)e=i=o=s;else{var l=s<.5?s*(1+n):s+n-s*n,c=2*s-l;e=a(c,l,r+1/3),i=a(c,l,r),o=a(c,l,r-1/3)}var u=[255*e,255*i,255*o].map(Math.round);return u[3]=p,u},h}();return function(){var n="mousedown",s="focusin",o="keydown";function p(t,e,i){a(t,o,function(t){0<=e.indexOf(t.key)&&i(t)})}function t(t){var e=this;this.settings={popup:"right",layout:"default",alpha:!0,editor:!0},this._openProxy=function(t){e.openHandler(t)},this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(t)}document.documentElement.firstElementChild.appendChild(document.createElement("style")).textContent=".picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6rem}.layout_default .picker_editor input{width:calc(100% + 2px);height:calc(100% + 2px)}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{margin:-1px}.picker_selector{position:absolute;z-index:1;display:block;transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{box-sizing:border-box;font-family:monospace;padding:.1em .2em}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_done button{box-sizing:border-box;padding:.2em .5em;cursor:pointer}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;transform:skew(45deg);transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}";var e=t.prototype;return e.setOptions=function(t){if(t){var e=this.settings;if(t instanceof HTMLElement)e.parent=t;else{e.parent&&t.parent&&e.parent!==t.parent&&(e.parent.removeEventListener("click",this._openProxy,!1),this._popupInited=!1),function(t,e,i){for(var o in t)i&&0<=i.indexOf(o)||(e[o]=t[o])}(t,e),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var i=t.color;i&&this._setColor(i)}var o=e.parent;o&&e.popup&&!this._popupInited?(a(o,"click",this._openProxy),p(o,[" ","Spacebar","Enter"],this._openProxy),this._popupInited=!0):t.parent&&!e.popup&&this.show()}},e.openHandler=function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var e=t&&t.type===o?this._domEdit:this.domElement;setTimeout(function(){e.focus()},100),this.onOpen&&this.onOpen(this.color)}},e.closeHandler=function(t){var e,i=this.settings.parent,o=t&&t.type,r=!1;t?o===n||o===s?this.domElement.contains(t.target)||(r=!0):((e=t).preventDefault(),e.stopPropagation(),r=!0):r=!0,r&&this.hide()&&(i.style.pointerEvents="",o!==n&&i.focus(),this.onClose&&this.onClose(this.color))},e.movePopup=function(t,e){this.closeHandler(),this.setOptions(t),e&&this.openHandler()},e.setColor=function(t,e){this._setColor(t,{silent:e})},e._setColor=function(t,e){if("string"==typeof t&&(t=t.trim()),t){var i;e=e||{};try{i=new r(t)}catch(t){if(e.failSilently)return;throw t}if(!this.settings.alpha){var o=i.hsla();o[3]=1,i.hsla(o)}this.color=i,this._setHSLA(null,null,null,null,e)}},e.show=function(){var t=this.settings;if(!t.parent)return!1;if(this.domElement){var e=this._toggleDOM(!0);return this._setPosition(),e}var i,o,r=t.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color HEX, RGB or HSL value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div></div>',n=(i=r,(o=document.createElement("div")).innerHTML=i,o.firstElementChild);return this.domElement=n,this._domH=w(".picker_hue",n),this._domSL=w(".picker_sl",n),this._domA=w(".picker_alpha",n),this._domEdit=w(".picker_editor input",n),this._domSample=w(".picker_sample",n),this._domOkay=w(".picker_done button",n),n.classList.add("layout_"+t.layout),t.alpha||n.classList.add("no_alpha"),t.editor||n.classList.add("no_editor"),this._ifPopup(function(){n.classList.add("popup")}),this._setPosition(),this.color?this._updateUI():this._setColor("#0cf"),this._bindEvents(),!0},e.hide=function(){return this._toggleDOM(!1)},e._bindEvents=function(){var i=this,t=this.domElement;a(t,"click",function(t){t.preventDefault()}),l(this._domH,function(t,e){i._setHSLA(t)}),l(this._domSL,function(t,e){i._setHSLA(null,t,1-e)}),this.settings.alpha&&l(this._domA,function(t,e){i._setHSLA(null,null,null,1-e)});var e=this._domEdit;function o(t){i._ifPopup(function(){i.closeHandler(t)})}function r(t){i._ifPopup(function(){i.closeHandler(t)}),i.onDone&&i.onDone(i.color)}a(e,"input",function(t){i._setColor(this.value,{fromEditor:!0,failSilently:!0})}),a(e,"focus",function(t){this.selectionStart===this.selectionEnd&&this.select()}),a(window,n,o),a(window,s,o),p(t,["Esc","Escape"],o),a(this._domOkay,"click",r),p(t,["Enter"],r)},e._setPosition=function(){var i=this.settings.parent,o=this.domElement;i!==o.parentNode&&i.appendChild(o),this._ifPopup(function(t){"static"===getComputedStyle(i).position&&(i.style.position="relative");var e=!0===t?"popup_right":"popup_"+t;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(t){t===e?o.classList.add(t):o.classList.remove(t)}),o.classList.add(e)})},e._setHSLA=function(t,e,i,o,r){r=r||{};var n=this.color,s=n.hsla();[t,e,i,o].forEach(function(t,e){(t||0===t)&&(s[e]=t)}),n.hsla(s),this._updateUI(r),this.onChange&&!r.silent&&this.onChange(n)},e._updateUI=function(t){if(this.domElement){t=t||{};var e=this.color,i=e.hsla(),o="hsl("+360*i[0]+", 100%, 50%)",r=e.hslString(),n=e.hslaString(),s=this._domH,p=this._domSL,a=this._domA,l=w(".picker_selector",s),c=w(".picker_selector",p),u=w(".picker_selector",a);g(0,l,i[0]),this._domSL.style.backgroundColor=this._domH.style.color=o,g(0,c,i[1]),m(0,c,1-i[2]),p.style.color=r,m(0,u,1-i[3]);var h=r,d=h.replace("hsl","hsla").replace(")",", 0)"),f="linear-gradient("+[h,d]+")";if(this._domA.style.backgroundImage=f+", url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",!t.fromEditor){var _=e.hex();this._domEdit.value=this.settings.alpha?_:_.substr(0,7)}this._domSample.style.color=n}function g(t,e,i){e.style.left=100*i+"%"}function m(t,e,i){e.style.top=100*i+"%"}},e._ifPopup=function(t,e){var i=this.settings;i.parent&&i.popup?t&&t(i.popup):e&&e()},e._toggleDOM=function(t){var e=this.domElement;if(!e)return!1;var i=t?"":"none",o=e.style.display!==i;return o&&(e.style.display=i),o},t}()});
var _0x109f=['addEventListener','mouseenter','9143630149','verse-hover','value','mouseleave','style','verse','Enter','click','submit','getElementById','try\x20Again','input','Congrats.\x20You\x20made\x20it.\x20text\x20(914)\x20363-0149\x20for\x20the\x20next\x20step.','opacity'];(function(_0x197b0a,_0x5b9461){var _0x1ae53a=function(_0xd413dc){while(--_0xd413dc){_0x197b0a['push'](_0x197b0a['shift']());}};_0x1ae53a(++_0x5b9461);}(_0x109f,0x126));var _0x41e2=function(_0x197b0a,_0x5b9461){_0x197b0a=_0x197b0a-0x0;var _0x1ae53a=_0x109f[_0x197b0a];return _0x1ae53a;};var input=document['getElementById'](_0x41e2('0x7'));document[_0x41e2('0x5')](_0x41e2('0x4'))['addEventListener'](_0x41e2('0x3'),function(){validateForm(input[_0x41e2('0xe')]);});window[_0x41e2('0xa')]('keydown',function(_0x1c4314){if(_0x1c4314['key']==_0x41e2('0x2')){validateForm(input[_0x41e2('0xe')]);}});function validateForm(_0x99118d){if(_0x99118d==_0x41e2('0xc')){alert(_0x41e2('0x8'));return![];}else{alert(_0x41e2('0x6'));}}var verse=document[_0x41e2('0x5')](_0x41e2('0x1'));var verseHover=document['getElementById'](_0x41e2('0xd'));verse[_0x41e2('0xa')](_0x41e2('0xb'),function(_0x49369d){verseHover[_0x41e2('0x0')][_0x41e2('0x9')]=0x1;});verse[_0x41e2('0xa')](_0x41e2('0xf'),function(){verseHover[_0x41e2('0x0')][_0x41e2('0x9')]=0x0;});
(function(g){g.wjsContext=g;var f=function(a){this.options=a=this.extendOptions(a);g[a.settings?a.settings.clientName:"wjs"]=this;"loading"!==this.document.readyState?this.init():this.window.addEventListener("DOMContentLoaded",this.init.bind(this))};f.prototype={context:g,window:g.window||window,document:g.document||window.document,init:function(){var a=this,b=a.options;a.extendObject(a,{version:b.settings?b.settings.version:"[$version]-headless",readyComplete:!1,packageDefault:{},loaders:{},loadersBasic:[],
extLoaded:{WjsLoader:{}},extRequire:{WjsLoader:{}},classMethods:{},classProtos:{},processes:{},processCounter:0,stack:[],stackCurrent:!1,cacheReg:{},settings:{clientName:"",paramExtra:"",paramInc:"",paramExc:"",paramToken:"",pathResponse:"",cacheToken:""}});a.extendObject(a,b);a.classExtend("WjsLoader",f.lib.Loader);a.classExtend("WjsProcess",f.lib.Process);a.loaderAdd("JsLink",f.retrieve("WjsLoader","JsLink"),!0);a.loaderAdd("WjsLoader",f.retrieve("WjsLoader","WjsLoader"),!0);for(var c=0,d;d=a.loadersBasic[c++];)a.loaderAdd(d,
void 0,!0);a.async=a.window.setTimeout.bind(a.window);a.trigger=f.trigger;a.use(null,{response:a.packageDefault,complete:function(){var c=f.readyCallbacks[a.settings.clientName];a.readyComplete=!0;b.complete&&b.complete.call(a);c&&a.callbacks(c)}})},callbacks:function(a,b,c){for(var d=b?"apply":"call",e,h=0;e=a[h++];)e[d](c||this,b)},urlToken:function(a){var b=this.settings.cacheToken;return b?(-1===a.indexOf("?")?a+"?":a)+"&"+b:a},loaderAdd:function(a,b,c,d){var e=this,h="WjsLoader"+a;b=b||{};e.loaders[a]||
(b.type=a,b.classExtends="WjsLoader"+(b.loaderExtends||""),b.loaderExtends?e.loadersExists([b.loaderExtends],function(){e.loaderBuild(a,h,b,c,d)}):e.loaderBuild(a,h,b,c,d))},loaderBuild:function(a,b,c,d,e){this.classExtend(b,c);this.loaders[a]=new (this.classProto(b))(a);this.extRequire[a]={};b=this.extLoaded;b[a]=b[a]||{};d&&(b.WjsLoader[a]=c);e&&e()},loadersExists:function(a,b){for(var c=0,d=[],e;e=a[c++];)this.loaders[e]||d.push(e);return d.length?this.use({WjsLoader:d},{stack:!1,complete:b}):
b()},process:function(a,b){return new (this.classProto("WjsProcess"))(a,b,this)},use:function(a,b){var c=this.extendArgs(arguments);c[1]&&(c[1].async=!1!==c[1].async);return this.process(c[0],c[1])},get:function(a,b){var c=this.extLoaded[a];return c&&c.hasOwnProperty(b)?c[b]:!1},destroy:function(a,b,c){var d=this,e=d.extendArgs(arguments),h=e[0];c=e[1];"boolean"===typeof c&&(c={});c=d.extendObject({destroy:!0,dependencies:!0===arguments[1]||!0===arguments[2]},d.extendOptions(c));c.async=!0===c.async;
if(h.WjsLoader&&1<Object.keys(h).length){var k={WjsLoader:h.WjsLoader},e=this.extendObject({},c);e.complete=function(){d.destroy(k,c)};delete h.WjsLoader;return this.destroy(h,e)}return d.process(h,c)},extIsCore:function(a,b){return"WjsLoader"===a&&("WjsLoader"!==b||"JsLink"!==b||-1!==this.loadersBasic.indexOf(b))},requirementsDeletable:function(a,b){var c={},d=this.extRequire[a][b];d&&this.regEach(d,function(d,h){this.extIsCore(d,h)||this.requireShared(a,b,d,h,c)||(c[d]=c[d]||[],c[d].push(h))});
return c},requireShared:function(a,b,c,d,e){var h=this,k=!1;h.regEach(h.extRequire,function(f,m){var g=h.extRequire[f][m];if(f!==a&&m!==b&&g[c]&&!(-1===g[c].indexOf(d)||e&&e[f]&&-1!==e[f].indexOf(m)))return k=!0,!1});return k},regEach:function(a,b){for(var c=0,d,e,h,f=Object.keys(a),g;e=f[c++];)for(g=Array.isArray(a[e])?a[e]:Object.keys(a[e]),d=0;h=g[d++];)if(!1===b.call(this,e,h))return!1;return!0},regRem:function(a,b,c){delete a[b][c];this.objectIsEmpty(a[b])&&delete a[b]},regNext:function(a){var b=
Object.keys(a)[0],c;return b&&(c=Object.keys(a[b])[0])?{type:b,name:c,data:a[b][c]}:!1},ajax:function(a){var b=new this.window.XMLHttpRequest,c=a.data?this.param(a.data):void 0,d=a.method||"GET",e=a.success,h=a.url;b.open(d,"GET"===d&&c?h+"?"+c:h,void 0!==a.async?a.async:!0);b.onreadystatechange=function(){4===b.readyState&&(200===b.status?e&&"function"===typeof e&&e(b):a.error&&a.error(b))};"POST"===d&&b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.send(c)},param:function(a){for(var b=
0,c=[],d,e=Object.keys(a);d=e[b++];)c.push(d+"="+a[d]);return c.join("&")},extendObject:function(a,b,c){for(var d=0,e,h=Object.keys(b),f;e=h[d++];)f=b[e],c&&"object"===typeof f&&null!==f?(a[e]=a[e]||(Array.isArray(f)?[]:{}),this.extendObject(a[e],f)):a[e]=f;return a},extendArgs:function(a){var b=a[0],c=a[1],d={};"string"===typeof b&&(d[b]=[c],b=d,c=a[2]);return[b,c]},extendOptions:function(a){a?"function"===typeof a&&(a={complete:a}):a={};return a},extendProto:function(a,b){for(var c=0,d=Object,e,
h=d.keys(b);e=h[c++];)d.defineProperty(a,e,d.getOwnPropertyDescriptor(b,e));return a},objectIsEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},classExtend:function(a,b){var c=this.classMethods;c[a]?this.extendProto(c[a],b):(c[a]=b,c[a].protoClassName=a);delete this.classProtos[a]},classProto:function(a){var b=this.classProtos,c=this.classMethods[a];if(!b[a]){var d,e=Object;(d=c&&c.classExtends?c.classExtends:!1)&&(e=this.classProto(d));d=b[a]=function(){var a=this.__construct;
a&&(arguments.length?a.apply(this,arguments):a.call(this))};d.prototype=Object.create(e.prototype);d.prototype.constructor=e;d.prototype.className=a;d.prototype.wjs=this;c&&this.extendProto(b[a].prototype,c)}return b[a]},classProtoDestroy:function(a,b){var c=this.classProtos,d=this.classMethods;c[a]&&delete c[a];!b&&d[a]&&delete d[a]},onload:function(a,b){var c=!1,d=function(){c||(c=!0,a.removeEventListener("load",d),b())};a.addEventListener("load",d);this.async(d,200)},err:function(a,b){var c=this.window.console,
d="["+this.settings.clientName+" error] : ";if(!b&&c)c.error(d+a);else throw new this.window.Error(d+a);}};f.lib={};f.reg={};f.readyCallbacks={};f.context=g;f.ready=function(a,b){var c=this.readyCallbacks;"function"===typeof a&&(b=a,a="wjs");g[a]&&!0===g[a].readyComplete?g[a].async(b):(c[a]=c[a]||[],c[a].push(b))};f.trigger=function(a,b,c){var d=g.window,e=d.document.createEvent("CustomEvent");e.initCustomEvent(a,!0,!0,b||null);(c||d).dispatchEvent(e)};f.listenOnce=function(a,b){var c=function(){g.window.removeEventListener(a,
c);b()};g.window.addEventListener(a,c)};f.register=function(a,b,c){var d=this.reg;d[a]=d[a]||{};d[a][b]=c;f.trigger(["wjsRegister",a,b].join("::"))};f.retrieve=function(a,b){var c=this.reg;return c[a]&&c[a][b]?c[a][b]:!1};f.registerListen=function(a,b,c){var d=this,e=f.retrieve(a,b);e?c(e):f.listenOnce("wjsRegister::"+a+"::"+b,function(){c(d.reg[a][b])})};f.cache=function(a,b,c){f.register("cache",a+"/"+b,c)};f._e=function(){};g.WjsProto=f;f.lib.Loader={type:"",preventReload:!0,processType:"server",
__construct:function(){f.reg.WjsLoader[this.type]=f.reg.WjsLoader[this.type]||{}},__destruct:f._e,parse:function(a,b,c){this.enable(a,b,c);return b},register:f._e,link:function(a){this.wjs.use(this.type,a)},destroy:function(a,b){this.disable(a,b);return!0},enable:f._e,disable:f._e,requestUse:function(a,b){return{mode:this.processType,type:this.type,name:a}},requestDestroy:function(a,b){return{mode:"parse",type:this.type,name:a}},registerListen:function(a,b,c){var d=this;f.registerListen(a,b,function(){d.register.call(d,
a,b,c)})}};f.lib.Process={phase:0,phases:["bootIsReload","bootRequestFilter","bootGetLoaders","bootFilterLoaders","processStart"],__construct:function(a,b){var c=this.wjs;b=c.extendOptions(b);c.extendObject(this,{id:c.processCounter++,request:a||{},destroy:b.destroy||!1,async:!1!==b.async,options:b,response:b.response||{},parseQ:{},callbacks:b.complete?[b.complete]:[],exclude:b.exclude,stack:!1===b.stack?!1:b.stack||c.stackCurrent||c.stack,stackInternal:[],output:{},reboot:this.boot.bind(this),responseParseNextProxy:this.responseParseNext.bind(this)});
c.processes[this.id]=this;this.stack?(this.stack.push(this),this.stack.started||(this.stack.started=!0,this.stackNext())):this.boot()},boot:function(){this[this.phases[this.phase]]()&&(this.phase++,this.boot())},bootIsReload:function(){return this.options.reload?(this.phase++,this.wjs.destroy(this.request,{stack:!1,complete:this.reboot}),!1):!0},bootRequestFilter:function(){var a=this,b=a.wjs,c={};if(b.regEach(this.request,function(d,e){var f=0,k,g;g=a.output;if((k=b.get(d,e))&&!a.destroy)g[d]=g[d]||
{},g[d][e]=k;else{for(g=Object.keys(b.processes);k=g[f++];)if(k=b.processes[k],!Object.isFrozen(k)&&k.destroy===a.destroy&&k.parseQ[d]&&k.parseQ[d][e])return k.itemProcess(d,e,a.reboot),!1;c[d]=c[d]||[];c[d].push(e)}}))return this.request=c,!0},bootGetLoaders:function(){this.phase++;this.wjs.loadersExists(Object.keys(this.request),this.reboot)},bootFilterLoaders:function(){for(var a={},b=Object.keys(this.request),c,d=0;c=b[d++];)this.wjs.loaders[c]&&(a[c]=this.request[c]);this.request=a;return!0},
processStart:function(){var a=this,b=a.wjs,c=0,d,e={},f=this.response,k=b.settings,g="request"+(a.destroy?"Destroy":"Use");b.regEach(this.request,function(c,l){var n=b.loaders[c][g](l,a);switch(n.mode){case "server":d=k.paramInc+"["+c+"]";e[d]=e[d]?e[d]+","+l:l;break;case "parse":f[c]=f[c]||{},f[c][l]={"#data":n.data}}});if(b.objectIsEmpty(e))a.responseParse(f);else{if(a.exclude)if(!0===a.exclude)e[k.paramExc]="1";else for(d=Object.keys(a.exclude),c=0;c<d.length;c++)e[k.paramExc+"["+d[c]+"]"]=a.exclude[d[c]].join(",");
k.cacheToken&&(e[k.paramToken]=k.cacheToken);b.ajax({url:k.pathResponse+"?"+b.param(e)+k.paramExtra,method:"GET",success:function(c){b.extendObject(f,JSON.parse(c.responseText),!0);a.responseParse(f)}})}},responseParse:function(a){var b=this,c=b.wjs,d=b.parseQ;c.extendObject(d,a,!0);c.loadersExists(Object.keys(d),function(){b.async?c.async(b.responseParseNextProxy):b.responseParseNext()})},responseParseNext:function(){var a,b=this.parseQ;(a=this.wjs.regNext(b))?this.itemProcess(a.type,a.name):(0<
Object.keys(b).length&&this.wjs.err("Parse queue not empty."),this.processComplete())},itemProcess:function(a,b,c){var d=this.parseQ[a][b];c&&(d["#callback"]=c);if(this.destroy)this.itemDestroy(a,b);else if(!1===this.wjs.get(a,b))this.itemParse(a,b,d);else return this.itemProcessComplete(a,b),!1;return!0},itemParse:function(a,b,c){var d=this,e=d.wjs,h=e.extRequire,k=d.parseQ,g=function(){d.itemParse(a,b,c)};h[a][b]=h[a][b]||{};if(c["#require"]&&(e.extendObject(h[a][b],c["#require"]),d.requireMissing(c["#require"]))){e.regEach(c["#require"],
function(a,b){if(k[a]&&k[a][b])return e.loadersExists([a],function(){d.itemProcess(a,b,g)}),!1})&&(c["#require"]=void 0,e.use(c["#require"],{stack:!1,complete:g}));return}"string"===typeof c["#data"]&&0===c["#data"].indexOf("cache://")?(e.cacheReg[a+"::"+b]=c["#data"].split("://")[1],f.registerListen("cache",a+"/"+b,function(e){c["#data"]=e;d.itemParseSave(a,b,e)})):d.itemParseSave(a,b,c["#data"])},itemParseSave:function(a,b,c){var d=this.wjs,e=d.loaders[a];"string"===typeof c&&0===c.indexOf("WJS_ERR_")?
(d.err("Parse error for "+a+"::"+b+" : "+c),c=new d.window.Error(c)):c=e.parse(b,c,this);!1!==c&&this.itemParseComplete(a,b,c)},itemParseComplete:function(a,b,c){var d=this.output,e=this.wjs.extLoaded;e[a]&&(e[a][b]=c,d[a]=d[a]||{},d[a][b]=c);this.itemProcessComplete(a,b)},itemDestroy:function(a,b){var c=this.wjs.get(a,b),d=this.wjs.loaders[a];d&&!1!==c&&!1===d.destroy(b,c,this)||this.itemDestroyComplete(a,b)},itemDestroyComplete:function(a,b){var c=this,d=c.wjs,e=a+"::"+b,f=d.cacheReg[e],g=c.options.dependencies?
d.requirementsDeletable(a,b):!1;delete d.extRequire[a][b];delete d.extLoaded[a][b];f&&(d.extendObject(g,d.requirementsDeletable("CacheLink",f)),delete c.wjs.cacheReg[e]);g&&Object.keys(g).length?d.destroy(g,{stack:!1,dependencies:!0,complete:function(){c.itemDestroyComplete(a,b)}}):this.itemProcessComplete(a,b)},itemProcessComplete:function(a,b){var c=this.wjs,d=this.parseQ[a][b]["#callback"];this.wjs.regRem(this.parseQ,a,b);d?c.async(d):this.responseParseNext()},processComplete:function(){var a=
this.wjs;delete a.processes[this.id];Object.freeze(this);if(this.callbacks.length){var b=a.stackCurrent;a.stackCurrent=this.stackInternal;a.callbacks(this.callbacks,[this.output,this]);a.stackCurrent=b}this.stack&&this.stackNext()},requireMissing:function(a){var b=!1;this.wjs.regEach(a,function(a,d){if(!1===this.get(a,d))return b=!0,!1});return b},stackNext:function(){this.stack.length?this.stack.shift().boot():this.stack.started=!1}};f.register("WjsLoader","JsLink",{processType:"parse",parse:function(a,
b,c){if("WJS_PUSH_JSLINK_INCLUDED"===b)return this.wjs.document.head.querySelector('script[src="'+a+'"]')||!0;var d=this,e=d.wjs,f=e.document.createElement("script");b=e.urlToken(b||a);return b instanceof e.window.Error?!0:(e.onload(f,function(){d.parseLinkLoaded(a,f,c)}),d.enable(a,f),f.setAttribute("src",b),!1)},enable:function(a,b){b.nodeType&&!b.parentNode&&this.wjs.document.head.appendChild(b)},disable:function(a,b){b.nodeType&&b.parentNode&&b.parentNode.removeChild(b)},parseLinkLoaded:function(a,
b,c){c.itemParseComplete(this.type,a,b)}});f.register("WjsLoader","WjsLoader",{loaderExtends:"JsLink",processType:"server",destroy:function(a,b){var c=this.wjs,d=c.loaders;d[a]&&(d[a].__destruct(),c.classProtoDestroy("WjsLoader"+a),delete d[a],delete c.extLoaded[a],delete c.extRequire[a]);return d.JsLink.destroy.call(this,a,b)},parse:function(a,b,c){var d=this.wjs;if(!0===b)return d.loaderAdd(a),!0;this.registerListen(this.type,a,c);d.loaders.JsLink.parse.call(this,a,b,c);return!1},parseLinkLoaded:function(a,
b,c){},register:function(a,b,c){a=f.retrieve(this.type,b);this.wjs.loaderAdd(b,a);c.itemParseComplete(this.type,b,a)}})})(this);
